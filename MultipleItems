<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
			   xmlns:s="library://ns.adobe.com/flex/spark"
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   xmlns:foodnutritionservice="services.foodnutritionservice.*"
			   xmlns:valueObjects="valueObjects.*"
			   xmlns:charts="mx.charts.*"
			   xmlns:series="mx.charts.series.*"
			   applicationDPI="240" currentState="ShoppingList">
	<fx:Style source="TestDrive.css"/>
	<fx:Script>
		<![CDATA[
			import com.adobe.serializers.utility.TypeUtility;
			
			import mx.events.FlexEvent;
			
			import spark.events.TextOperationEvent;
			
			protected function button1_clickHandler(event:MouseEvent):void
			{
				currentState="Nutrition";
			}
			
			protected function button2_clickHandler(event:MouseEvent):void
			{
				currentState="ShoppingList";
			}			
			
			protected function button3_clickHandler(event:MouseEvent):void
			{
				currentState="NutritionChart";
			}		
			
			protected function textInput_changeHandler(event:TextOperationEvent):void
			{	
				if(textInput.text!="" )
				{
					
					
					switch (textInput.text){
						case "Bread":
							red.visible=false;
							green.visible=true;
							orange.visible=false;
							break;
						case "Chocolate":
							red.visible=false;
							green.visible=false;
							orange.visible=true;
							break;
						default:
							red.visible=true;
							green.visible=false;
							orange.visible=false;
							break;
					}
						getFoodnutritionByNameResult.token = foodnutritionService.getFoodnutritionByName(textInput.text);
				}
			}
			
			
			protected function Form2_creationCompleteHandler(event:FlexEvent):void
			{
				getFoodnutritionByNameResult2.token = foodnutritionService.getFoodnutritionByName(textInput1.text);
			}
			
		]]>
	</fx:Script>
	<s:states>
		<s:State name="ShoppingList"/>
		<s:State name="Nutrition"/>
		<s:State name="NutritionChart"/>
	</s:states>

	<fx:Declarations>
		<valueObjects:FoodNutrition2 id="foodNutrition2"/>
		<foodnutritionservice:FoodnutritionService id="foodnutritionService"/>
		<s:CallResponder id="getFoodnutritionByNameResult"
						 result="foodNutrition2 = getFoodnutritionByNameResult.lastResult as FoodNutrition2"/>
		<valueObjects:FoodNutrition2 id="foodNutrition22"/>
		<s:CallResponder id="getFoodnutritionByNameResult2"
						 result="foodNutrition22 = getFoodnutritionByNameResult2.lastResult as FoodNutrition2"/>
		
		
	</fx:Declarations>
	<s:Button x="96" y="70" label="Cost" fontSize="28"/>
	<s:Button x="513" y="65" label="Nutrition" click="button1_clickHandler(event)" fontSize="28"
			  x.Nutrition="388" y.Nutrition="70" enabled.Nutrition="false"
			  x.NutritionChart="388" y.NutritionChart="70" enabled.NutritionChart="false"
			  x.ShoppingList="386" y.ShoppingList="71"/>
	<s:Button x="976" y="65" label="History" fontSize="28"
			  x.Nutrition="733" y.Nutrition="69"
			  x.NutritionChart="733" y.NutritionChart="69"
			  x.ShoppingList="710" y.ShoppingList="71"/>
	<s:Label x="463" y="197" fontSize="36" text="Shopping List"
			 x.Nutrition="378" y.Nutrition="184" text.Nutrition="Nutrition"
			 x.NutritionChart="378" y.NutritionChart="184" text.NutritionChart="Nutrition"
			 x.ShoppingList="341" y.ShoppingList="256"/>
	<s:Form includeIn="ShoppingList" x="180" y="669">
		<s:FormItem>
			<s:TextInput id="textInput" change="textInput_changeHandler(event)" />
		</s:FormItem>
		<s:FormItem>
			<s:TextInput id="textInput1" change="textInput_changeHandler(event)"/>
		</s:FormItem>
	
	</s:Form>
	<s:Button includeIn="Nutrition,NutritionChart" x="103" y="210" label="Back" click="button2_clickHandler(event)"/>

	<s:Form id="Form1" includeIn="Nutrition" x="67" y="285" width="250" height="336">
		<s:FormItem label="Name">
			<s:Label id="nameLabel" text="{foodNutrition2.name}"/>
		</s:FormItem>
		<s:FormItem label="Carbohydrate">
			<s:Label id="carbohydrateLabel" text="{foodNutrition2.carbohydrate}"/>
		</s:FormItem>
		<s:FormItem label="Protein">
			<s:Label id="proteinLabel" text="{foodNutrition2.protein}"/>
		</s:FormItem>
		<s:FormItem label="Fat">
			<s:Label id="fatLabel" text="{foodNutrition2.fat}"/>
		</s:FormItem>
		<s:FormItem label="Calories">
			<s:Label id="caloriesLabel" text="{foodNutrition2.calories}"/>
		</s:FormItem>
		<s:FormItem label="OfWhichSugarsCarb">
			<s:Label id="ofWhichSugarsCarbLabel" text="{foodNutrition2.ofWhichSugarsCarb}"/>
		</s:FormItem>
		<s:FormItem label="OfWhichSugars">
			<s:Label id="ofWhichSugarsLabel" text="{foodNutrition2.ofWhichSugars}"/>
		</s:FormItem>
		<s:FormItem label="Sodium">
			<s:Label id="sodiumLabel" text="{foodNutrition2.sodium}"/>
		</s:FormItem>		
	</s:Form>
	
	<s:Form id="Form2" includeIn="Nutrition" x="506" y="284"
			creationComplete="Form2_creationCompleteHandler(event)">
		<s:FormItem label="Name">
			<s:Label id="nameLabel2" text="{foodNutrition22.name}"/>
		</s:FormItem>
		<s:FormItem label="Carbohydrate">
			<s:Label id="carbohydrateLabel2" text="{foodNutrition22.carbohydrate}"/>
		</s:FormItem>
		<s:FormItem label="Protein">
			<s:Label id="proteinLabel2" text="{foodNutrition22.protein}"/>
		</s:FormItem>
		<s:FormItem label="Fat">
			<s:Label id="fatLabel2" text="{foodNutrition22.fat}"/>
		</s:FormItem>
		<s:FormItem label="Calories">
			<s:Label id="caloriesLabel2" text="{foodNutrition22.calories}"/>
		</s:FormItem>
		<s:FormItem label="OfWhichSugarsCarb">
			<s:Label id="ofWhichSugarsCarbLabel2" text="{foodNutrition22.ofWhichSugarsCarb}"/>
		</s:FormItem>
		<s:FormItem label="OfWhichSugars">
			<s:Label id="ofWhichSugarsLabel2" text="{foodNutrition22.ofWhichSugars}"/>
		</s:FormItem>
		<s:FormItem label="Sodium">
			<s:Label id="sodiumLabel2" text="{foodNutrition22.sodium}"/>
		</s:FormItem>
		 
	</s:Form>
	

	<s:Image id="green" includeIn="ShoppingList" visible="false"
			 x="750" y="668" width="25" height="25" source="@Embed('libs/greendot.png')"/>
	<s:Image id="orange" includeIn="ShoppingList" visible="false"
			 x="750" y="668" width="25" height="25" source="@Embed('libs/orangedot.png')"/>
	<s:Image id="red" includeIn="ShoppingList" visible="false"
			 x="750" y="668" width="25" height="25" source="@Embed('libs/reddot.png')"/>
	<s:Button includeIn="Nutrition" x="378" y="933" label="Chart-view"
			  click="button3_clickHandler(event)"/>
	<s:Button includeIn="ShoppingList" x="58" y="1437" label="..."/>
	
	
	
	
</s:Application>
