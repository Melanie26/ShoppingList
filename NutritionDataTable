<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
			   xmlns:s="library://ns.adobe.com/flex/spark"
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   xmlns:foodnutritionservice="services.foodnutritionservice.*"
			   xmlns:valueObjects="valueObjects.*"
			   applicationDPI="240" currentState="ShoppingList">
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			protected function button1_clickHandler(event:MouseEvent):void
			{
				currentState="Nutrition";
			}
			
			protected function button2_clickHandler(event:MouseEvent):void
			{
				currentState="ShoppingList";
			}
			
			
			protected function form_creationCompleteHandler(event:FlexEvent):void
			{
				getAllFoodnutritionResult.token = foodnutritionService.getAllFoodnutrition();
			}
			
			
			protected function button_clickHandler(event:Event):void
			{
				if(textInput.text!="")
				{
				getAllFoodnutritionResult.token = foodnutritionService.getFoodnutritionByName(textInput.text);

				}
			}
			
		]]>
	</fx:Script>
	<s:states>
		<s:State name="ShoppingList"/>
		<s:State name="Nutrition"/>
	</s:states>

	<fx:Declarations>
		<s:CallResponder id="getAllFoodnutritionResult"
						 result="foodNutrition = getAllFoodnutritionResult.lastResult as FoodNutrition"/>
		<foodnutritionservice:FoodnutritionService id="foodnutritionService"/>
		<valueObjects:FoodNutrition id="foodNutrition"/>
	
	</fx:Declarations>
	<s:Button x="96" y="70" label="Cost" fontSize="28"/>
	<s:Button x="513" y="65" label="Nutrition" click="button1_clickHandler(event)" fontSize="28"
			  x.Nutrition="388" y.Nutrition="70" enabled.Nutrition="false"
			  x.ShoppingList="386" y.ShoppingList="71"/>
	<s:Button x="976" y="65" label="History" fontSize="28"
			  x.Nutrition="733" y.Nutrition="69"
			  x.ShoppingList="710" y.ShoppingList="71"/>
	<s:Label x="463" y="197" fontSize="36" text="Shopping List"
			 x.Nutrition="378" y.Nutrition="184" text.Nutrition="Nutrition"
			 x.ShoppingList="341" y.ShoppingList="256"/>
	<s:Form includeIn="ShoppingList" x="180" y="669">
		<s:FormItem>
			<s:TextInput id="textInput" change="button_clickHandler(event)"/>
		</s:FormItem>
		<s:FormItem>
			<s:TextInput/>
		</s:FormItem>
	
	</s:Form>
	<s:Button includeIn="Nutrition" x="103" y="210" label="Back" click="button2_clickHandler(event)"/>

	<s:Form includeIn="Nutrition" x="103" y="276" width="437" height="336" >
		<s:FormItem label="Name">
			<s:Label id="nameLabel" text="{foodNutrition.name}"/>
		</s:FormItem>
		<s:FormItem label="Carbohydrate">
			<s:Label id="carbohydrateLabel" text="{foodNutrition.carbohydrate}"/>
		</s:FormItem>
		<s:FormItem label="Protein">
			<s:Label id="proteinLabel" text="{foodNutrition.protein}"/>
		</s:FormItem>
		<s:FormItem label="Fat">
			<s:Label id="fatLabel" text="{foodNutrition.fat}"/>
		</s:FormItem>
		<s:FormItem label="Calories">
			<s:Label id="caloriesLabel" text="{foodNutrition.calories}"/>
		</s:FormItem>
		<s:FormItem label="OfWhichSugarsCarb">
			<s:Label id="ofWhichSugarsCarbLabel" text="{foodNutrition.ofWhichSugarsCarb}"/>
		</s:FormItem>
		<s:FormItem label="OfWhichSugars">
			<s:Label id="ofWhichSugarsLabel" text="{foodNutrition.ofWhichSugars}"/>
		</s:FormItem>
		<s:FormItem label="Sodium">
			<s:Label id="sodiumLabel" text="{foodNutrition.sodium}"/>
		</s:FormItem>
		
	</s:Form>
</s:Application>
